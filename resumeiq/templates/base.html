<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ResumeIQ{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>

  <!-- Theme persistence -->
  <script>
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.classList.add("dark");
    }
  </script>
</head>

<body class="bg-gray-100 dark:bg-slate-900 text-gray-900 dark:text-gray-100">

<nav class="bg-white dark:bg-slate-900 shadow px-6 py-4 flex justify-between">
  <a href="/" class="text-xl font-semibold">ResumeIQ</a>

  {% if request.endpoint not in ['auth.login', 'auth.signup'] %}
    <div class="space-x-4">
      {% if session.get("user_id") %}
        <a href="/profile" class="hover:underline">Profile</a>
        <a href="/logout" class="hover:underline">Logout</a>
      {% else %}
        <a href="/login" class="hover:underline">Login</a>
        <a href="/signup" class="hover:underline">Signup</a>
      {% endif %}
    </div>
  {% endif %}
</nav>

  <!-- CONTENT -->
  <main class="container mx-auto px-4 py-10">
    {% block content %}{% endblock %}
  </main>

  <!-- Theme Toggle Script -->
  <script>
    function toggleTheme() {
      document.documentElement.classList.toggle("dark");
      localStorage.setItem(
        "theme",
        document.documentElement.classList.contains("dark")
          ? "dark"
          : "light"
      );
    }
  </script>

</body>
</html>
